{% extends 'base.html' %} 
{% block javascript %}

<script type=text/javascript>
	function print() {

		promise = $('#promise').val()
		event = $('#event').val()
		recipient = $('#recipient').val()
		exp_val = $('#expiry').val()
		exp_unit = $('#exptype').val()

		if (exp_val > 0) {
			expiry = 'Expira en ' + exp_val + ' ' + exp_unit + '. ';
		} else {
			expiry = ''
		}

		note = '@' + recipient + ' se enredó con #' + promise + ' por #'+event.toLowerCase().replace(' ','')+'. ' + expiry + ' @{{issuer}}'
		note_encoded = escape('@' + recipient) + ' se enredó con '+escape('#' + promise) + ' por '+escape('#'+event.toLowerCase().replace(' ',''))+'. ' + expiry + escape(' @{{issuer}}')

		note_formatted = '<h3 id=\"printed\">' + note + '</h3>'

		$('div.output').html(note_formatted);

		//note_encoded = escape(note);
		console.log(note)
		console.log(note_encoded)

		url = 'https://twitter.com/share?url=&text=' + note_encoded;

		$('a.tweet').attr('href', url);

		$('#tweetbutton').show();

	}

	$(document).ready(function() {

		$('#promise').keyup(print);
		$('#event').keyup(print);
		$('#recipient').keyup(print);
		$('#expiry').keyup(print);
		$('#exptype').change(print);
		$('#transferable').change(print);

		$('#tweetbutton').hide();

	})
</script>



{% endblock %} 

{% block main %}

<div id="left" class="span-15">

	<h3 style='display: inline'>Printer</h3>
	<hr class="space">

	<span id="promised">Creando deuda:</span> <br>

	<hr class="space">

	<h3 style="display: inline" id="printer">
		@<input id="recipient" style='display: inline' type="text"
			maxlength="20" size="20" placeholder="deudor">
	</h3>

	<h3 id="printer" style="display: inline">
		se enredó con 
		<select id="promise">
			<option value="1T">#1T</option>
			<option value="2T">#2T</option>
			<option value="3T">#3T</option>
			<option value="4T">#4T</option>
		</select>
	</h3>

	<h3 id="printer" style="display: inline">
		por 
		<input id="event" type="text" maxlength="55" size="20"
			placeholder="Nombre del evento">.
	</h3>

	<hr class="space">

	<p>
		<i>Options</i>
	</p>

	<h3 id="printer" style="display: inline">
		Expires in <input id="expiry" type="text" size=2 maxlength=3
			placeholder="10" value="30"> 
			<select id="exptype" >

			<option id="minutos">minutes</option>
			<option id="horas">hours</option>
			<option id="días" selected>días</option>
			<option id="meses">meses</option>
			<option id="años">años</option>

		</select>

	</h3>


</div>



<div id="right" class="span-15">

	<hr class="space">
	<hr class="space">

	<span id="promised">Your @monedaTEJA:</span>

	<hr class="space">

	<div class="output"></div>

	<hr class="space">

	<div id="tweetbutton">
		<a class="tweet" href="https://twitter.com/share?url=''&amp;text="
			target="_blank"><img src="/static/tweet.png" width=60></a>
	</div>
</div>
{% endblock %}
